(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19792,e=>{"use strict";var r=e.i(43476),t=e.i(71645);function a({transcript:e,maxWords:a=50}){let s=(0,t.useMemo)(()=>{if(!e)return[];let r=e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[.,!?;:\u2014\-()"'Â«Â»\[\]]+/g," ").toLowerCase().trim().split(/\s+/).filter(Boolean),t={};return r.forEach(e=>{e.length>2&&(t[e]=(t[e]||0)+1)}),Object.entries(t).sort((e,r)=>r[1]-e[1]).slice(0,a).map(([e,r])=>({text:e,value:r}))},[e,a]),n=Math.max(...s.map(e=>e.value),1);return 0===s.length?(0,r.jsx)("div",{className:"flex items-center justify-center h-64 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:(0,r.jsx)("p",{className:"text-gray-400 italic",children:"No hay palabras para mostrar"})}):(0,r.jsx)("div",{className:"relative w-full h-64 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 overflow-hidden",children:(0,r.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-2 h-full",children:s.map(({text:e,value:t})=>(0,r.jsx)("span",{className:"font-semibold transition-transform hover:scale-110 cursor-default",style:{fontSize:`${12+t/n*36}px`,opacity:.5+t/n*.5,color:`hsl(${200+t/n*60}, ${60+t/n*30}%, ${45-t/n*15}%)`,lineHeight:1.2},title:`"${e}" aparece ${t} ${1===t?"vez":"veces"}`,children:e},e))})})}e.s(["default",()=>a])},67585,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let a=e.r(32061);function s({reason:e,children:r}){if("undefined"==typeof window)throw Object.defineProperty(new a.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return r}},9885,(e,r,t)=>{"use strict";function a(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"encodeURIPath",{enumerable:!0,get:function(){return a}})},52157,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return o}});let a=e.r(43476),s=e.r(74080),n=e.r(63599),l=e.r(9885);function o({moduleIds:e}){if("undefined"!=typeof window)return null;let r=n.workAsyncStorage.getStore();if(void 0===r)return null;let t=[];if(r.reactLoadableManifest&&e){let a=r.reactLoadableManifest;for(let r of e){if(!a[r])continue;let e=a[r].files;t.push(...e)}}return 0===t.length?null:(0,a.jsx)(a.Fragment,{children:t.map(e=>{let t=`${r.assetPrefix}/_next/${(0,l.encodeURIPath)(e)}`;return e.endsWith(".css")?(0,a.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style",nonce:r.nonce},e):((0,s.preload)(t,{as:"script",fetchPriority:"low",nonce:r.nonce}),null)})})}},69093,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let a=e.r(43476),s=e.r(71645),n=e.r(67585),l=e.r(52157);function o(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},d=function(e){let r={...i,...e},t=(0,s.lazy)(()=>r.loader().then(o)),d=r.loading;function c(e){let o=d?(0,a.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=!r.ssr||!!r.loading,c=i?s.Suspense:s.Fragment,u=r.ssr?(0,a.jsxs)(a.Fragment,{children:["undefined"==typeof window?(0,a.jsx)(l.PreloadChunks,{moduleIds:r.modules}):null,(0,a.jsx)(t,{...e})]}):(0,a.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(t,{...e})});return(0,a.jsx)(c,{...i?{fallback:o}:{},children:u})}return c.displayName="LoadableComponent",c}},70703,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let a=e.r(55682)._(e.r(69093));function s(e,r){let t={};"function"==typeof e&&(t.loader=e);let s={...t,...r};return(0,a.default)({...s,modules:s.loadableGenerated?.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),r.exports=t.default)},76737,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(70703),s=e.i(19792);let n=(0,a.default)(()=>e.A(5493),{loadableGenerated:{modules:[16452]},ssr:!1});function l(){let[e,a]=(0,t.useState)(200),[l,o]=(0,t.useState)(!1),[i,d]=(0,t.useState)(!1),[c,u]=(0,t.useState)(""),[m,x]=(0,t.useState)(null),[p,h]=(0,t.useState)(""),[g,b]=(0,t.useState)(!1),[f,j]=(0,t.useState)(0),[v,y]=(0,t.useState)(0),[N,w]=(0,t.useState)(!1),[F,D]=(0,t.useState)(""),[S,E]=(0,t.useState)(1),[B,R]=(0,t.useState)(!1),C=(0,t.useRef)(null),P=(0,t.useRef)([]),A=(0,t.useRef)(null),O=(0,t.useRef)(null),_=(0,t.useRef)(null),k=(0,t.useRef)(null),z=(0,t.useRef)(null),L=(0,t.useRef)(null),T=(0,t.useRef)(null),M=(0,t.useRef)(null),I=(0,t.useRef)(null),V=(0,t.useRef)(null),$=(0,t.useRef)(null);(0,t.useRef)(null);let U=()=>{if(L.current){try{L.current.stop()}catch(e){console.warn("[DAF] Error al detener reconocimiento:",e)}L.current=null}b(!1)},G=async()=>{try{let r=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:48e3,channelCount:1}});A.current=r;let t=new(window.AudioContext||window.webkitAudioContext)({sampleRate:48e3});O.current=t;let a=t.createMediaStreamSource(r),s=t.createDelay(5),n=t.createGain();_.current=a,k.current=s,z.current=n,s.delayTime.value=e/1e3,n.gain.value=.5,a.connect(s),s.connect(n),n.connect(t.destination);let l="audio/webm;codecs=opus";for(let e of["audio/webm;codecs=opus","audio/webm","audio/ogg;codecs=opus","audio/mp4"])if(MediaRecorder.isTypeSupported(e)){l=e;break}let i=new MediaRecorder(r,{mimeType:l,audioBitsPerSecond:128e3});C.current=i,P.current=[],i.ondataavailable=e=>{e.data&&e.data.size>0&&P.current.push(e.data)},i.onstop=()=>{let e=new Blob(P.current,{type:l}),r=URL.createObjectURL(e);V.current=null,x(r);let t=new Audio(r);t.addEventListener("loadedmetadata",()=>{j(t.duration)})},i.start(),o(!0),(()=>{let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e){console.warn("âŒ SpeechRecognition no disponible en este navegador"),alert("Tu navegador no soporta reconocimiento de voz. Por favor usa Chrome, Edge o Safari.");return}if(L.current)try{L.current.stop()}catch(e){}let r=new e;r.lang="es-ES",r.continuous=!0,r.interimResults=!0,r.maxAlternatives=1;let t="",a=!1;r.onstart=()=>{b(!0)},r.onresult=e=>{let r="";for(let a=e.resultIndex;a<e.results.length;a++){let s=e.results[a][0].transcript;e.results[a].isFinal?t+=s+" ":r+=s}let a=t+r;h(a),y(a.trim().split(/\s+/).filter(Boolean).length)},r.onerror=e=>{console.error("[DAF] Error en reconocimiento de voz:",e.error),a=!0,({"no-speech":"âŒ No se detectÃ³ voz. AsegÃºrate de que tu micrÃ³fono funciona y hablaste.",network:"âŒ Error de red. Intenta de nuevo.","not-allowed":"âŒ No se permitiÃ³ el acceso al micrÃ³fono.","service-not-allowed":"âŒ El servicio de reconocimiento de voz no estÃ¡ disponible.",aborted:"âš ï¸ El reconocimiento fue interrumpido.","bad-grammar":"âš ï¸ Error en la configuraciÃ³n del lenguaje."})[e.error]||e.error},r.onend=()=>{b(!1),a||t.trim()||console.warn("[DAF] No se capturÃ³ audio durante la grabaciÃ³n")};try{r.start(),L.current=r}catch(e){console.error("[DAF] Error al iniciar reconocimiento:",e),alert("Error al iniciar el reconocimiento de voz. Por favor, recarga la pÃ¡gina e intenta de nuevo.")}})()}catch(e){console.error("Error al acceder al micrÃ³fono:",e),alert("No se pudo acceder al micrÃ³fono. Por favor, verifica los permisos.")}},q=async()=>{if(!m)return void D("No hay audio para guardar");try{if(!(await fetch("/api/me",{credentials:"include"})).ok){alert("âŒ Debes iniciar sesiÃ³n para guardar audios en la base de datos.\n\nTu audio se guardarÃ¡ solo en tu navegador (localStorage). Para guardarlo en la nube, inicia sesiÃ³n.");let r={id:Date.now().toString(),date:new Date().toISOString(),source:"daf",duration:f,wordCount:v,delay:e,transcript:p,audioUrl:m},t=localStorage.getItem("audio_records"),a=t?JSON.parse(t):[];a.push(r),localStorage.setItem("audio_records",JSON.stringify(a)),D("âœ… Audio guardado localmente (Inicia sesiÃ³n para guardar en la nube)");return}}catch(s){alert("âŒ No se pudo verificar tu sesiÃ³n. El audio se guardarÃ¡ solo localmente.");let r={id:Date.now().toString(),date:new Date().toISOString(),source:"daf",duration:f,wordCount:v,delay:e,transcript:p,audioUrl:m},t=localStorage.getItem("audio_records"),a=t?JSON.parse(t):[];a.push(r),localStorage.setItem("audio_records",JSON.stringify(a)),D("âœ… Audio guardado localmente");return}let r=new Date,t=`DAF_${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}_${String(r.getHours()).padStart(2,"0")}h${String(r.getMinutes()).padStart(2,"0")}`,a=prompt("Â¿QuÃ© nombre quieres darle al audio?",t);if(null===a)return;let s=a.trim()||t;w(!0),D("Guardando audio...");try{let r=await fetch(m).then(e=>e.blob()),t=new FormData;t.append("file",r,`${s}.webm`),t.append("source","daf"),t.append("duration",f.toString()),t.append("wordCount",v.toString()),t.append("transcript",p),t.append("delay",e.toString()),t.append("playbackRate",S.toString());let a=await fetch("/api/upload-to-supabase",{method:"POST",body:t,credentials:"include"}),n=await a.json();if(a.ok&&n.ok){D("âœ… Â¡Audio guardado exitosamente en la base de datos!");let r={id:n.id,date:new Date().toISOString(),source:"daf",duration:f,wordCount:v,delay:e,transcript:p,audioUrl:n.publicUrl},t=localStorage.getItem("audio_records"),a=t?JSON.parse(t):[];a.push(r),localStorage.setItem("audio_records",JSON.stringify(a))}else D("âŒ Error al guardar: "+(n.error||"Error desconocido"))}catch(e){console.error("[DAF] Error al guardar:",e),D("âŒ Error de conexiÃ³n al guardar en base de datos")}finally{w(!1)}},H=async()=>{if(m&&M.current)try{if(I.current&&"suspended"===I.current.state)try{await I.current.resume()}catch(e){console.warn("[DAF] Error al reanudar contexto:",e)}if(M.current.currentTime=0,M.current.playbackRate=S,M.current.readyState>=2){let e=M.current.play();void 0!==e&&(await e,R(!0))}else{let e=async()=>{try{let e=M.current.play();void 0!==e&&(await e,R(!0))}catch(e){console.error("[DAF] Error al reproducir despuÃ©s de cargar:",e)}M.current?.removeEventListener("canplay",e)};M.current.addEventListener("canplay",e,{once:!0}),setTimeout(()=>{M.current?.removeEventListener("canplay",e)},5e3)}}catch(e){console.error("[DAF] Error en playAudioWithDelay:",e),alert("Error al reproducir audio. Por favor, intenta de nuevo.")}};return(0,t.useEffect)(()=>{let e=M.current;if(!e)return;let r=()=>R(!1),t=()=>R(!1),a=()=>R(!0),s=()=>{e.playbackRate=S};return e.addEventListener("ended",r),e.addEventListener("pause",t),e.addEventListener("play",a),e.addEventListener("loadedmetadata",s),()=>{e.removeEventListener("ended",r),e.removeEventListener("pause",t),e.removeEventListener("play",a),e.removeEventListener("loadedmetadata",s)}},[m,S]),(0,t.useEffect)(()=>()=>{if(U(),C.current&&"inactive"!==C.current.state&&C.current.stop(),O.current)try{_.current&&_.current.disconnect(),k.current&&k.current.disconnect(),z.current&&z.current.disconnect(),O.current.close()}catch(e){}if(I.current)try{I.current.close()}catch(e){}A.current&&A.current.getTracks().forEach(e=>e.stop())},[]),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto p-6 mt-16 md:mt-20",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold mb-6 text-[#6B3F1D]",children:"DAF (Delayed Auditory Feedback)"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[40%_60%] gap-6",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"p-4 bg-white rounded-lg border-2 border-[#F7C873] shadow-lg",children:[(0,r.jsxs)("label",{className:"block mb-2 font-semibold text-gray-700",children:["Retardo de audio: ",(0,r.jsxs)("span",{className:"text-[#6B3F1D] text-xl",children:[e," ms"]})]}),(0,r.jsx)("input",{type:"range",min:0,max:1e3,step:1,value:e,onChange:e=>{var r;a(r=Number(e.target.value)),k.current&&(k.current.delayTime.value=r/1e3),$.current&&($.current.delayTime.value=r/1e3)},className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[#6B3F1D]"}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,r.jsx)("span",{children:"0 ms"}),(0,r.jsx)("span",{children:"500 ms"}),(0,r.jsx)("span",{children:"1000 ms"})]}),(0,r.jsx)("div",{className:"mt-3 p-3 bg-amber-50 rounded-lg border border-[#F7C873]",children:(0,r.jsxs)("p",{className:"text-sm text-[#6B3F1D]",children:[(0,r.jsx)("strong",{children:"ðŸ’¡ Recomendado:"})," 50-200ms es el rango mÃ¡s efectivo para la mayorÃ­a de personas."]})})]}),m&&!l&&(0,r.jsxs)("div",{className:"p-4 bg-white rounded-lg border-2 border-[#F7C873] shadow-lg",children:[(0,r.jsxs)("label",{className:"block mb-2 font-semibold text-gray-700",children:["Velocidad de reproducciÃ³n: ",(0,r.jsxs)("span",{className:"text-[#6B3F1D] text-xl",children:[S.toFixed(2),"x"]})]}),(0,r.jsx)("input",{type:"range",min:.5,max:2,step:.1,value:S,onChange:e=>{var r;E(r=Number(e.target.value)),M.current&&(M.current.playbackRate=r)},className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[#6B3F1D]"}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,r.jsx)("span",{children:"0.5x (Lento)"}),(0,r.jsx)("span",{children:"1x (Normal)"}),(0,r.jsx)("span",{children:"2x (RÃ¡pido)"})]})]}),(0,r.jsx)("div",{className:"flex gap-3 flex-wrap",children:l?(0,r.jsx)("button",{className:"flex-1 px-6 py-3 rounded-lg bg-red-500 text-white hover:bg-red-600 font-semibold shadow-md transition-colors",onClick:()=>{if(C.current&&"inactive"!==C.current.state&&C.current.stop(),U(),_.current&&k.current)try{_.current.disconnect(),k.current.disconnect(),z.current&&z.current.disconnect()}catch(e){console.warn("Error al desconectar nodos:",e)}O.current&&(O.current.close(),O.current=null),A.current&&(A.current.getTracks().forEach(e=>e.stop()),A.current=null),o(!1)},children:"â¹ Detener GrabaciÃ³n"}):(0,r.jsx)("button",{className:"flex-1 px-6 py-3 rounded-lg bg-[#6B3F1D] text-white hover:bg-[#8B5F3D] font-semibold shadow-md transition-colors",onClick:G,children:"ðŸŽ™ï¸ Grabar con DAF"})}),(0,r.jsxs)("div",{className:"p-6 border-2 rounded-lg bg-gradient-to-br from-amber-50 to-orange-100 border-[#F7C873]",children:[(0,r.jsx)("p",{className:"mb-3 font-bold text-[#6B3F1D] text-xl",children:"ðŸ“– Â¿QuÃ© es el DAF?"}),(0,r.jsxs)("p",{className:"text-sm text-gray-700 mb-4 text-justify leading-relaxed",children:[(0,r.jsx)("strong",{children:"DAF (Delayed Auditory Feedback)"})," es una tÃ©cnica que devuelve tu voz con un pequeÃ±o retraso de tiempo (50-200ms). Este efecto ayuda a personas con disfluencias a mejorar su fluidez del habla, reducir el ritmo, controlar las pausas y disminuir los bloqueos iniciales."]}),(0,r.jsxs)("div",{className:"mb-4 bg-white p-4 rounded-lg border-2 border-[#F7C873]",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-[#6B3F1D] mb-3",children:"Â¿CÃ³mo funciona?"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center text-xs",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"ðŸŽ¤"}),(0,r.jsx)("p",{className:"font-bold text-[#6B3F1D]",children:"Hablas"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Tu voz entra por el micrÃ³fono"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"â±ï¸"}),(0,r.jsx)("p",{className:"font-bold text-[#6B3F1D]",children:"Retraso"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Se aÃ±ade un delay de 50-200ms"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"ðŸŽ§"}),(0,r.jsx)("p",{className:"font-bold text-[#6B3F1D]",children:"Escuchas"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Tu voz retrasada en tiempo real"})]})]})]}),(0,r.jsx)("p",{className:"mb-2 font-semibold text-[#6B3F1D]",children:"Pasos rÃ¡pidos:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside text-sm text-gray-700 space-y-1 leading-relaxed",children:[(0,r.jsx)("li",{children:"Ajusta el retardo con el control deslizante (recomendado: 150-200 ms)"}),(0,r.jsx)("li",{children:'Haz clic en "ðŸŽ™ï¸ Grabar con DAF" para escuchar tu voz mientras grabas'}),(0,r.jsx)("li",{children:"Habla con naturalidad y observa cÃ³mo el retardo afecta tu fluidez"}),(0,r.jsx)("li",{children:"DetÃ©n la grabaciÃ³n y reproduce el audio para evaluar tu progreso"})]})]}),p&&(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"bg-[#FFF6ED] p-3 rounded-lg border-2 border-[#F7C873] shadow",children:[(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"Palabras detectadas"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-[#6B3F1D]",children:p.trim().split(/\s+/).filter(Boolean).length})]}),(0,r.jsxs)("div",{className:"bg-[#FFF6ED] p-3 rounded-lg border-2 border-[#F7C873] shadow",children:[(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"Caracteres"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-[#8B5F3D]",children:p.length})]})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(l||p)&&(0,r.jsxs)("div",{className:"p-4 border-2 rounded-lg bg-white shadow-lg border-[#F7C873]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-[#6B3F1D]",children:"ðŸ“ TranscripciÃ³n en Tiempo Real"}),g&&(0,r.jsxs)("span",{className:"flex items-center text-sm text-[#8B5F3D]",children:[(0,r.jsx)("span",{className:"animate-pulse mr-2 w-3 h-3 bg-[#8B5F3D] rounded-full"}),"Escuchando..."]})]}),(0,r.jsx)("div",{className:"bg-gray-50 p-4 rounded border min-h-[100px] max-h-[250px] overflow-y-auto",children:p?(0,r.jsx)("p",{className:"text-gray-800 leading-relaxed",children:p}):(0,r.jsx)("p",{className:"text-gray-400 italic",children:l?"Esperando que empieces a hablar...":"No hay transcripciÃ³n disponible"})}),p&&(0,r.jsx)("button",{onClick:()=>{h(""),y(0),U()},className:"mt-3 text-sm text-red-600 hover:text-red-800 underline",children:"Borrar transcripciÃ³n"})]}),m&&!l&&(0,r.jsxs)("div",{className:"p-4 border-2 rounded-lg shadow-lg bg-gradient-to-br from-green-50 to-emerald-50 border-green-300",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-[#6B3F1D] mb-3",children:"ðŸŽ§ Audio Grabado"}),(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg border-2 border-[#6B3F1D] shadow-md mb-4",children:(0,r.jsx)("audio",{ref:M,controls:!0,src:m,className:"w-full",style:{filter:"contrast(1.2) saturate(1.3)",accentColor:"#6B3F1D"},preload:"metadata"},m)}),f>0&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-white rounded-lg border shadow-sm",children:(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"DuraciÃ³n"}),(0,r.jsxs)("div",{className:"text-xl font-bold text-[#6B3F1D]",children:[f.toFixed(2),"s"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"Retardo aplicado"}),(0,r.jsxs)("div",{className:"text-xl font-bold text-[#6B3F1D]",children:[e,"ms"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"Palabras"}),(0,r.jsx)("div",{className:"text-xl font-bold text-[#6B3F1D]",children:v})]})]})}),(0,r.jsxs)("div",{className:"flex gap-3 mb-3",children:[(0,r.jsx)("button",{onClick:B?()=>{M.current&&(M.current.pause(),R(!1))}:H,className:"flex-1 px-4 py-2 rounded-lg bg-[#6B3F1D] text-white hover:bg-[#8B5F3D] font-semibold transition-colors shadow-md",children:B?"â¸ï¸ Pausar":"â–¶ï¸ Reproducir"}),(0,r.jsx)("button",{onClick:q,disabled:N,className:"flex-1 px-4 py-2 rounded-lg bg-[#8B5F3D] text-white hover:bg-[#6B3F1D] disabled:bg-gray-400 font-semibold transition-colors shadow-md",children:N?"Guardando...":"ðŸ’¾ Guardar Audio"})]}),F&&(0,r.jsx)("p",{className:`mt-2 text-sm ${F.includes("Error")?"text-red-600":"text-green-700"}`,children:F})]}),(m||l)&&(0,r.jsxs)("div",{className:"p-4 bg-white rounded-lg border-2 border-[#F7C873] shadow-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-[#6B3F1D] mb-3",children:"ðŸŽ¨ Espectrograma"}),(0,r.jsx)(n,{audioUrl:m,stream:l?A.current:null,isLive:l,audioCtxRef:l?O:I,mediaSourceRef:l?T:V,audioRef:M}),(0,r.jsxs)("p",{className:"text-xs text-gray-600 mt-3 text-justify",children:["ðŸ’¡ ",(0,r.jsx)("strong",{children:"CÃ³mo leer el espectrograma:"})," El eje horizontal muestra el tiempo (segundos), el eje vertical muestra la frecuencia (Hz). Los ",(0,r.jsx)("strong",{children:"colores"})," representan la intensidad de energÃ­a: ",(0,r.jsx)("span",{className:"text-blue-600",children:"azul"})," = baja intensidad,",(0,r.jsx)("span",{className:"text-yellow-600",children:"verde-amarillo"})," = intensidad media,",(0,r.jsx)("span",{className:"text-orange-600",children:"naranja"})," = alta intensidad (mÃ¡s intenso)."]})]}),p&&p.trim().split(/\s+/).filter(Boolean).length>3&&(0,r.jsxs)("div",{className:"p-4 border-2 rounded-lg bg-white shadow-lg border-[#F7C873]",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-[#6B3F1D] mb-3",children:"â˜ï¸ Nube de Palabras"}),(0,r.jsx)(s.default,{transcript:p,maxWords:30}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-3 text-justify",children:"La nube de palabras muestra las palabras mÃ¡s utilizadas durante tu grabaciÃ³n. El tamaÃ±o de cada palabra es proporcional a la frecuencia con la que la pronunciaste."})]}),p&&f>0&&(0,r.jsxs)("div",{className:"p-4 border-2 border-[#8B5F3D] rounded-lg bg-gradient-to-br from-[#FFF6ED] to-[#F7C873] shadow-sm",children:[(0,r.jsx)("h3",{className:"text-base font-bold text-[#6B3F1D] mb-2 flex items-center gap-2",children:"ðŸ“ˆ MÃ©tricas de Ritmo y Fluidez"}),(0,r.jsx)("p",{className:"text-xs text-gray-700 mb-3",children:"Estas mÃ©tricas ayudan a evaluar el ritmo del habla y las caracterÃ­sticas prosÃ³dicas:"}),(0,r.jsxs)("div",{className:"mb-4 p-3 bg-white border-l-4 border-[#6B3F1D] rounded",children:[(0,r.jsxs)("h4",{className:"font-bold text-[#6B3F1D] text-xs mb-1 flex items-center gap-1",children:[(0,r.jsx)("span",{children:"ðŸ“Š"})," Rangos normales"]}),(0,r.jsxs)("div",{className:"text-xs text-gray-700 space-y-0.5",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"PPM:"})," 125-175 palabras/minuto (conversaciÃ³n normal)"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"PVI:"})," VarÃ­a segÃºn idioma; valores altos = mayor variaciÃ³n rÃ­tmica"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"VarcoV:"})," Mayor variabilidad = ritmo mÃ¡s variable"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"%V:"})," ~40-45% es tÃ­pico en espaÃ±ol"]})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"bg-white p-3 rounded-lg border border-[#8B5F3D]",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,r.jsx)("h4",{className:"font-bold text-sm text-[#6B3F1D]",children:"PVI - Ãndice de VariaciÃ³n de Pares"}),(0,r.jsxs)("span",{className:"text-lg font-bold text-[#8B5F3D]",children:[(e=>{if(!e)return 0;let r=e.trim().split(/\s+/).filter(Boolean);if(r.length<2)return 0;let t=0;for(let e=0;e<r.length-1;e++){let a=r[e].length,s=r[e+1].length,n=Math.abs(a-s),l=(a+s)/2;l>0&&(t+=n/l*100)}return t/(r.length-1)})(p).toFixed(1),"%"]})]}),(0,r.jsx)("p",{className:"text-xs text-gray-700",children:"Mide la variabilidad en la longitud de palabras consecutivas. Valores altos (>50%) indican ritmo mÃ¡s marcado por acentos, mientras que valores bajos sugieren ritmo mÃ¡s uniforme."})]}),(0,r.jsxs)("div",{className:"bg-white p-3 rounded-lg border border-[#8B5F3D]",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,r.jsx)("h4",{className:"font-bold text-sm text-[#6B3F1D]",children:"VarcoV - Coeficiente de VariaciÃ³n VocÃ¡lica"}),(0,r.jsxs)("span",{className:"text-lg font-bold text-[#8B5F3D]",children:[((e,r)=>{if(!e||0===r)return 0;let t=e.match(/[aeiouÃ¡Ã©Ã­Ã³ÃºÃ¼AEIOUÃÃ‰ÃÃ“ÃšÃœ]/g)||[];if(0===t.length)return 0;let a=1e3*r/t.length;return .3*a/a*100})(p,f).toFixed(1),"%"]})]}),(0,r.jsx)("p",{className:"text-xs text-gray-700",children:"Coeficiente de variaciÃ³n normalizado de las duraciones vocÃ¡licas. Valores altos (>40%) indican mayor variabilidad en la pronunciaciÃ³n de vocales, lo cual es tÃ­pico de lenguas con ritmo acentual."})]}),(0,r.jsxs)("div",{className:"bg-white p-3 rounded-lg border border-[#8B5F3D]",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,r.jsx)("h4",{className:"font-bold text-sm text-[#6B3F1D]",children:"%V - Porcentaje VocÃ¡lico"}),(0,r.jsxs)("span",{className:"text-lg font-bold text-[#8B5F3D]",children:[(e=>{if(!e)return 0;let r=e.replace(/\s/g,"").length;return 0===r?0:(e.match(/[aeiouÃ¡Ã©Ã­Ã³ÃºÃ¼AEIOUÃÃ‰ÃÃ“ÃšÃœ]/g)||[]).length/r*100})(p).toFixed(1),"%"]})]}),(0,r.jsx)("p",{className:"text-xs text-gray-700",children:"Porcentaje de vocales en el texto total (sin contar espacios). El espaÃ±ol tÃ­picamente tiene entre 40-50% de vocales. Valores mÃ¡s altos pueden indicar pronunciaciÃ³n mÃ¡s clara y abierta."})]})]})]})]})]})]})}e.s(["default",()=>l])},5493,e=>{e.v(r=>Promise.all(["static/chunks/3403c9657509ea62.js"].map(r=>e.l(r))).then(()=>r(16452)))}]);
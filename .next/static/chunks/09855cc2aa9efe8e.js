(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82856,e=>{"use strict";var t=e.i(43476),a=e.i(71645),n=e.i(22016);let s=["B","C","D","F","G","J","L","M","N","Ã‘","P","R","S","T","CH","LL","V","Z","K","Q","Y","W","X"];function i(){let[e,i]=(0,a.useState)(""),[l,r]=(0,a.useState)(0),[o,d]=(0,a.useState)(0),[c,m]=(0,a.useState)(!1),[x,u]=(0,a.useState)(""),[g,h]=(0,a.useState)(""),[f,b]=(0,a.useState)(!1),[p,w]=(0,a.useState)(""),j=(0,a.useState)(null)[0];(0,a.useEffect)(()=>()=>{if(j)try{j.stop()}catch(e){}},[]);let N=()=>{i(s[Math.floor(Math.random()*s.length)]),u(""),h(""),m(!1)},S=async()=>{w("Guardando...");try{if((await fetch("/api/me",{credentials:"include"})).ok){let e=await fetch("/api/save-score",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({game:"fonema-inicial",score:l,attempts:o,timestamp:new Date().toISOString()})}),t=localStorage.getItem("game_scores"),a=t?JSON.parse(t):[];if(a.push({id:Date.now().toString(),game:"fonema-inicial",score:l,attempts:o,timestamp:new Date().toISOString()}),localStorage.setItem("game_scores",JSON.stringify(a)),e.ok)w("âœ… Â¡Guardado exitosamente en la base de datos!");else{let t=await e.json().catch(()=>({}));console.error("Error guardando en base de datos:",t),w(`âš ï¸ Error: ${t.error||"Desconocido"}. Guardado localmente.`)}}else{let e=localStorage.getItem("game_scores"),t=e?JSON.parse(e):[];t.push({id:Date.now().toString(),game:"fonema-inicial",score:l,attempts:o,timestamp:new Date().toISOString()}),localStorage.setItem("game_scores",JSON.stringify(t)),w("ðŸ’¾ Guardado localmente (Inicia sesiÃ³n para guardar en la base de datos)")}}catch(a){console.error("Error saving score:",a);let e=localStorage.getItem("game_scores"),t=e?JSON.parse(e):[];t.push({id:Date.now().toString(),game:"fonema-inicial",score:l,attempts:o,timestamp:new Date().toISOString()}),localStorage.setItem("game_scores",JSON.stringify(t)),w("ðŸ’¾ Guardado localmente")}setTimeout(()=>w(""),4e3)};return f?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-100 p-8 mt-16 md:mt-20",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[(0,t.jsxs)("div",{className:"bg-white px-6 py-3 rounded-lg shadow-md",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Puntos"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-[#6B3F1D]",children:l})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:S,className:"px-6 py-2 bg-[#6B3F1D] text-white rounded-lg hover:bg-[#8B5F3D] transition-colors font-semibold shadow-md",children:"ðŸ’¾ Guardar Progreso"}),(0,t.jsx)("button",{onClick:()=>{S(),setTimeout(()=>b(!1),1500)},className:"px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-semibold shadow-md",children:"ðŸ Terminar"})]})]}),p&&(0,t.jsx)("div",{className:`mb-4 p-3 rounded-lg text-center font-semibold ${p.includes("âœ…")?"bg-green-100 text-green-800":p.includes("âŒ")?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:p}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-6 md:p-10 text-center",children:[(0,t.jsx)("h2",{className:"text-gray-600 mb-4",children:"Di una palabra que empiece con:"}),(0,t.jsx)("div",{className:"inline-block bg-gradient-to-br from-[#F7C873] to-[#e6b35a] rounded-full p-8 shadow-xl mb-8",children:(0,t.jsxs)("span",{className:"text-9xl font-black text-[#6B3F1D]",children:["/",e.toLowerCase(),"/"]})}),g&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-gray-100 rounded-lg",children:(0,t.jsxs)("p",{className:"text-lg text-gray-700",children:["EscuchÃ©: ",(0,t.jsxs)("strong",{children:['"',g,'"']})]})}),x&&(0,t.jsx)("div",{className:`mb-6 p-4 rounded-lg text-lg font-semibold ${x.includes("âœ…")?"bg-green-100 text-green-800":x.includes("ðŸŽ¤")?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:x}),(0,t.jsx)("button",{onClick:()=>{let t=window.SpeechRecognition||window.webkitSpeechRecognition;if(!t)return void u("âŒ Tu navegador no soporta reconocimiento de voz");let a=new t;a.lang="es-ES",a.continuous=!1,a.interimResults=!1,a.onstart=()=>{m(!0),u("ðŸŽ¤ Escuchando...")},a.onresult=t=>{let a=t.results[0][0].transcript.trim().toLowerCase();if(!a){u("âŒ No se detectÃ³ ninguna palabra"),m(!1);return}h(a),(t=>{let a=t.toUpperCase(),n=e.toLowerCase();d(o+1);let s=!1,i="",c=(t,a)=>0===t?"inicio":t>=a-e.length?"final":"medio";if("C"===e&&(a.includes("C")||a.includes("QU")||a.includes("K"))){s=!0;let e=a.indexOf("C"),t=a.indexOf("QU"),n=a.indexOf("K");i=c(Math.min(e>=0?e:1/0,t>=0?t:1/0,n>=0?n:1/0),a.length)}else if("B"===e&&(a.includes("B")||a.includes("V"))){s=!0;let e=a.indexOf("B"),t=a.indexOf("V");i=c(Math.min(e>=0?e:1/0,t>=0?t:1/0),a.length)}else if("V"===e&&(a.includes("B")||a.includes("V"))){s=!0;let e=a.indexOf("B"),t=a.indexOf("V");i=c(Math.min(e>=0?e:1/0,t>=0?t:1/0),a.length)}else if("J"===e&&(a.includes("J")||a.includes("G"))){s=!0;let e=a.indexOf("J"),t=a.indexOf("G");i=c(Math.min(e>=0?e:1/0,t>=0?t:1/0),a.length)}else if("CH"===e&&a.includes("CH"))s=!0,i=c(a.indexOf("CH"),a.length);else if("LL"===e&&a.includes("LL"))s=!0,i=c(a.indexOf("LL"),a.length);else if("Q"===e&&(a.includes("QU")||a.includes("Q"))){s=!0;let e=a.indexOf("QU"),t=a.indexOf("Q");i=c(Math.min(e>=0?e:1/0,t>=0?t:1/0),a.length)}else if("K"===e&&(a.includes("K")||a.includes("C")||a.includes("QU"))){s=!0;let e=a.indexOf("K"),t=a.indexOf("C"),n=a.indexOf("QU");i=c(Math.min(e>=0?e:1/0,t>=0?t:1/0,n>=0?n:1/0),a.length)}else if("Z"===e&&(a.includes("Z")||a.includes("C"))){s=!0;let e=a.indexOf("Z"),t=a.indexOf("C");i=c(Math.min(e>=0?e:1/0,t>=0?t:1/0),a.length)}else"Ã‘"===e&&a.includes("Ã‘")?(s=!0,i=c(a.indexOf("Ã‘"),a.length)):a.includes(e)&&(s=!0,i=c(a.indexOf(e),a.length));if(s){r(l+10);let e="";"inicio"===i?e="al inicio":"medio"===i?e="en el medio":"final"===i&&(e="al final"),u(`âœ… \xa1Correcto! El fonema /${n}/ est\xe1 ${e} de "${t}"`),setTimeout(()=>N(),2e3)}else u(`âŒ "${t}" no contiene el fonema /${n}/. Intenta otra palabra.`)})(a)},a.onerror=()=>{u("âŒ Error al escuchar. Intenta de nuevo."),m(!1)},a.onend=()=>{m(!1)};try{a.start()}catch(e){u("âŒ Error al iniciar reconocimiento")}},disabled:c,className:`px-12 py-6 rounded-xl text-2xl font-bold shadow-lg transition-all ${c?"bg-red-500 text-white cursor-wait animate-pulse":"bg-gradient-to-r from-green-500 to-green-600 text-white hover:shadow-2xl hover:scale-105"}`,children:c?"ðŸŽ¤ Escuchando...":"ðŸŽ¤ Presiona para hablar"}),(0,t.jsx)("div",{className:"mt-8 grid grid-cols-1 gap-4 max-w-md mx-auto",children:(0,t.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"PrecisiÃ³n"}),(0,t.jsxs)("div",{className:"text-2xl font-bold text-purple-700",children:[o>0?Math.round(l/(10*o)*100):0,"%"]})]})})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-100 p-8 mt-16 md:mt-20",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-6 text-center",children:"ðŸŽ¯ Juego de Fonemas"}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-[#6B3F1D] mb-4",children:"Â¿CÃ³mo jugar?"}),(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-3 text-gray-700",children:[(0,t.jsx)("li",{children:"Se mostrarÃ¡ un fonema grande en pantalla (B, C, D, etc.)"}),(0,t.jsx)("li",{children:"Presiona el botÃ³n del micrÃ³fono"}),(0,t.jsx)("li",{children:"Di una palabra que empiece con ese fonema"}),(0,t.jsx)("li",{children:"Â¡Gana 10 puntos por cada palabra correcta!"})]}),(0,t.jsx)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,t.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,t.jsx)("strong",{children:"ðŸ’¡ Beneficio terapÃ©utico:"})," Las prolongaciones suelen aparecer al iniciar palabras. Practicar fonemas iniciales reduce la tensiÃ³n y mejora el ataque suave."]})})]}),(0,t.jsx)("button",{onClick:()=>{r(0),d(0),b(!0),w(""),N()},className:"w-full py-4 bg-gradient-to-r from-[#6B3F1D] to-[#8B5F3D] text-white text-xl font-bold rounded-xl hover:shadow-lg transition-all",children:"ðŸŽ® Iniciar Juego"}),(0,t.jsx)(n.default,{href:"/progreso",className:"block mt-4 text-center text-[#6B3F1D] hover:underline",children:"ðŸ“Š Ver mi progreso"})]})})}e.s(["default",()=>i])}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,65461,e=>{"use strict";var t=e.i(43476),r=e.i(71645);function n({audioUrl:e,stream:n,isLive:i,audioCtxRef:l,mediaSourceRef:s,audioRef:a}){let c=(0,r.useRef)(null),o=(0,r.useRef)(null),d=(0,r.useRef)(),u=(0,r.useRef)(null),h=(0,r.useRef)(null),f=(0,r.useRef)(null),m=(0,r.useRef)([]),x=(0,r.useRef)(null),[g,v]=(0,r.useState)(0),[w,j]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=()=>{let e=l&&l.current||u.current;if(e&&"suspended"===e.state)try{e.resume()}catch(e){}};return window.addEventListener("pointerdown",e,{once:!1}),window.addEventListener("keydown",e,{once:!1}),()=>{window.removeEventListener("pointerdown",e),window.removeEventListener("keydown",e)}},[]),(0,r.useEffect)(()=>{let t,r,g,w,p;if(!c.current||!o.current)return;let b=c.current,y=o.current,N=b.getContext("2d"),E=y.getContext("2d");if(!N||!E)return;if(!e&&!i){N.fillStyle="#ffffff",N.fillRect(0,0,b.width,b.height),N.strokeStyle="#e8e8e8",N.lineWidth=1;for(let e=0;e<=5;e++){let t=b.height/5*e;N.beginPath(),N.moveTo(0,t),N.lineTo(b.width,t),N.stroke()}for(let e=0;e<=10;e++){let t=b.width/10*e;N.beginPath(),N.moveTo(t,0),N.lineTo(t,b.height),N.stroke()}E.fillStyle="#f9f9f9",E.fillRect(0,0,y.width,y.height),E.strokeStyle="#e0e0e0",E.lineWidth=.5;for(let e=0;e<=5;e++){let t=y.height/5*e;E.beginPath(),E.moveTo(0,t),E.lineTo(y.width,t),E.stroke()}return}if(u.current&&u.current!==l?.current){try{u.current.close()}catch(e){console.warn("Error cerrando audio context:",e)}u.current=null}let T=null;if(i&&n)t=l&&l.current||new(window.AudioContext||window.webkitAudioContext),l&&!l.current&&(l.current=t),l||(u.current=t),T=t.createMediaStreamSource(n);else{let e=null;if(!(e=a&&a.current?a.current:document.querySelector("audio")))return void console.warn("No se encontró elemento de audio");if(x.current=e,t=l&&l.current||new(window.AudioContext||window.webkitAudioContext),l&&!l.current&&(l.current=t),l||(u.current=t),s&&s.current)T=s.current;else if(f.current)T=f.current;else try{T=t.createMediaElementSource(e),s?s.current=T:f.current=T}catch(e){console.warn("No se pudo crear MediaElementSource (probablemente ya existe):",e)}}let S=t.createAnalyser();if(S.fftSize=4096,S.smoothingTimeConstant=.8,h.current=S,T)try{if(T.context===t){try{T.disconnect()}catch(e){}T.connect(S)}else console.warn("Source context mismatch",T.context.state,t.state)}catch(e){console.warn("Error conectando source al analyser:",e)}try{i||S.connect(t.destination)}catch(e){console.warn("Error conectando analyser al destination:",e)}i||t.state;let R=S.frequencyBinCount,z=new Uint8Array(R);function k(){N.fillStyle="#ffffff",N.fillRect(0,0,b.width,b.height),N.strokeStyle="#e8e8e8",N.lineWidth=1;for(let e=0;e<=5;e++){let t=b.height/5*e;N.beginPath(),N.moveTo(0,t),N.lineTo(b.width,t),N.stroke()}for(let e=0;e<=10;e++){let t=b.width/10*e;N.beginPath(),N.moveTo(t,0),N.lineTo(t,b.height),N.stroke()}}function L(){E.fillStyle="#f9f9f9",E.fillRect(0,0,y.width,y.height),E.strokeStyle="#e0e0e0",E.lineWidth=.5;for(let e=0;e<=5;e++){let t=y.height/5*e;E.beginPath(),E.moveTo(0,t),E.lineTo(y.width,t),E.stroke()}}return m.current=[],k(),L(),!i&&x.current&&(r=()=>{m.current=[],k(),L()},g=()=>{try{"suspended"===t.state&&t.resume()}catch(e){}x.current&&x.current.currentTime<.1&&(m.current=[],k(),L())},w=()=>{x.current&&j(x.current.currentTime)},p=()=>{x.current&&v(x.current.duration)},x.current.addEventListener("ended",r),x.current.addEventListener("play",g),x.current.addEventListener("timeupdate",w),x.current.addEventListener("loadedmetadata",p),x.current.duration&&!isNaN(x.current.duration)&&v(x.current.duration)),!function e(){let r=i||!x.current||!x.current.paused;if(r||m.current.length>0){if(S.getByteFrequencyData(z),r){let e=[];for(let t=0;t<R;t++)e.push(z[t]);m.current.push(e);let t=b.width;m.current.length>t&&m.current.shift()}if(m.current.length>0){k();let e=b.width/m.current.length;m.current.forEach((t,r)=>{for(let n=0;n<Math.min(t.length,200);n++){let i,l,s,a=t[n],c=b.height-n/200*b.height;if(a<85)i=0,l=0,s=Math.floor(50+a/85*155);else if(a<170){let e=(a-85)/85;i=Math.floor(255*e),l=Math.floor(100+155*e),s=Math.floor(205-205*e)}else i=255,l=Math.floor(255-(a-170)/85*155),s=0;N.fillStyle=`rgba(${i}, ${l}, ${s}, 0.9)`,N.fillRect(r*e,c-1,e+1,b.height/200)}}),L();let r=0;for(let e=5;e<100;e++)z[e]>r&&(r=z[e]);let n=t.sampleRate/2;m.current.length>1&&(E.strokeStyle="#2563eb",E.lineWidth=2,E.beginPath(),m.current.forEach((t,r)=>{let i=0,l=0;for(let e=5;e<100;e++)t[e]>i&&(i=t[e],l=e);let s=Math.min(Math.max((l/R*n-50)/300,0),1),a=y.height-s*y.height;0===r?E.moveTo(r*e,a):E.lineTo(r*e,a)}),E.stroke())}}d.current=requestAnimationFrame(e)}(),()=>{d.current&&cancelAnimationFrame(d.current);try{S.disconnect()}catch(e){}u.current&&u.current!==l?.current&&u.current.close(),!i&&x.current&&(r&&x.current.removeEventListener("ended",r),g&&x.current.removeEventListener("play",g),w&&x.current.removeEventListener("timeupdate",w),p&&x.current.removeEventListener("loadedmetadata",p))}},[e,i,n]);let p=()=>{let e=g||10,t=[];for(let r=0;r<11;r++){let n=e/10*r;t.push(n.toFixed(1)+"s")}return t};return(0,t.jsxs)("div",{className:"w-full flex flex-col items-center mt-1 mb-2",children:[(0,t.jsxs)("div",{className:"w-full mb-3",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600 mb-1 font-semibold",children:"F0 - Frecuencia fundamental (Pitch)"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-col justify-between text-xs text-gray-600",style:{paddingTop:"5px",paddingBottom:"5px"},children:[(0,t.jsx)("div",{children:"350 Hz"}),(0,t.jsx)("div",{children:"250 Hz"}),(0,t.jsx)("div",{children:"150 Hz"}),(0,t.jsx)("div",{children:"50 Hz"})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("canvas",{ref:o,width:800,height:120,className:"w-full rounded border border-gray-300 bg-white shadow-sm"}),(0,t.jsx)("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:p().map((e,r)=>(0,t.jsx)("div",{children:e},r))})]})]})]}),(0,t.jsxs)("div",{className:"w-full mb-3",children:[(0,t.jsxs)("div",{className:"text-xs text-gray-600 mb-1 font-semibold",children:["Espectrograma - ",(0,t.jsx)("span",{className:"text-blue-700",children:"Frecuencia (Hz)"})," vs ",(0,t.jsx)("span",{className:"text-green-700",children:"Tiempo (s)"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-col justify-between text-xs text-gray-600 text-right",style:{paddingTop:"5px",paddingBottom:"5px"},children:[(0,t.jsx)("div",{children:"5000 Hz"}),(0,t.jsx)("div",{children:"4000 Hz"}),(0,t.jsx)("div",{children:"3000 Hz"}),(0,t.jsx)("div",{children:"2000 Hz"}),(0,t.jsx)("div",{children:"1000 Hz"}),(0,t.jsx)("div",{children:"0 Hz"})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("canvas",{ref:c,width:800,height:250,className:"w-full rounded border border-gray-300 bg-white shadow-sm"}),(0,t.jsx)("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:p().map((e,r)=>(0,t.jsx)("div",{children:e},r))}),w>0&&g>0&&(0,t.jsxs)("div",{className:"mt-1 text-xs text-indigo-600 font-semibold",children:["Reproduciendo: ",w.toFixed(1),"s / ",g.toFixed(1),"s"]})]})]})]}),(0,t.jsxs)("div",{className:"mt-2 text-sm text-gray-700 w-full",children:[(0,t.jsxs)("p",{className:"mb-2 text-justify",children:[(0,t.jsx)("b",{children:"¿Qué muestra el espectrograma?"})," El ",(0,t.jsx)("span",{className:"font-semibold",children:"eje horizontal"})," muestra el ",(0,t.jsx)("span",{className:"text-green-700 font-semibold",children:"tiempo en segundos"}),", y el ",(0,t.jsx)("span",{className:"font-semibold",children:"eje vertical"})," muestra la ",(0,t.jsx)("span",{className:"text-blue-700 font-semibold",children:"frecuencia en Hertz (Hz)"}),". Cada punto de color representa la energía (intensidad) de una frecuencia específica en un momento dado. Las frecuencias bajas (parte inferior) corresponden a sonidos graves y las altas (parte superior) a sonidos agudos. Los colores indican intensidad: azul (bajo), verde-amarillo (medio), naranja (alto - más intenso)."]}),(0,t.jsxs)("p",{className:"text-xs text-gray-600 text-justify",children:[(0,t.jsx)("b",{children:"Elementos suprasegmentales del acento:"})," ",(0,t.jsx)("br",{}),"• ",(0,t.jsx)("b",{children:"Articulatoriamente:"})," Incremento de la frecuencia de vibración de las cuerdas vocales y de la fuerza y tiempo de salida del aire",(0,t.jsx)("br",{}),"• ",(0,t.jsx)("b",{children:"Acústicamente:"})," Aumento de frecuencia fundamental, de intensidad o de duración de una sílaba",(0,t.jsx)("br",{}),"• ",(0,t.jsx)("b",{children:"Perceptivamente:"})," Prominencia en la altura tonal (agudo), en la intensidad (fuerte) o en la duración (largo) de una sílaba"]})]})]})}e.s(["default",()=>n])},16452,e=>{e.n(e.i(65461))}]);
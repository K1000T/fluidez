module.exports=[29137,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246);let e=["B","C","D","F","G","J","L","M","N","Ã‘","P","R","S","T","CH","LL","V","Z","K","Q","Y","W","X"];function f(){let[a,f]=(0,c.useState)(""),[g,h]=(0,c.useState)(0),[i,j]=(0,c.useState)(0),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(""),u=(0,c.useState)(null)[0];(0,c.useEffect)(()=>()=>{if(u)try{u.stop()}catch(a){}},[]);let v=()=>{f(e[Math.floor(Math.random()*e.length)]),n(""),p(""),l(!1)},w=async()=>{t("Guardando...");try{if((await fetch("/api/me",{credentials:"include"})).ok){let a=await fetch("/api/save-score",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({game:"fonema-inicial",score:g,attempts:i,timestamp:new Date().toISOString()})}),b=localStorage.getItem("game_scores"),c=b?JSON.parse(b):[];if(c.push({id:Date.now().toString(),game:"fonema-inicial",score:g,attempts:i,timestamp:new Date().toISOString()}),localStorage.setItem("game_scores",JSON.stringify(c)),a.ok)t("âœ… Â¡Guardado exitosamente en la base de datos!");else{let b=await a.json().catch(()=>({}));console.error("Error guardando en base de datos:",b),t(`âš ï¸ Error: ${b.error||"Desconocido"}. Guardado localmente.`)}}else{let a=localStorage.getItem("game_scores"),b=a?JSON.parse(a):[];b.push({id:Date.now().toString(),game:"fonema-inicial",score:g,attempts:i,timestamp:new Date().toISOString()}),localStorage.setItem("game_scores",JSON.stringify(b)),t("ðŸ’¾ Guardado localmente (Inicia sesiÃ³n para guardar en la base de datos)")}}catch(c){console.error("Error saving score:",c);let a=localStorage.getItem("game_scores"),b=a?JSON.parse(a):[];b.push({id:Date.now().toString(),game:"fonema-inicial",score:g,attempts:i,timestamp:new Date().toISOString()}),localStorage.setItem("game_scores",JSON.stringify(b)),t("ðŸ’¾ Guardado localmente")}setTimeout(()=>t(""),4e3)};return q?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-100 p-8 mt-16 md:mt-20",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[(0,b.jsxs)("div",{className:"bg-white px-6 py-3 rounded-lg shadow-md",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Puntos"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-[#6B3F1D]",children:g})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:w,className:"px-6 py-2 bg-[#6B3F1D] text-white rounded-lg hover:bg-[#8B5F3D] transition-colors font-semibold shadow-md",children:"ðŸ’¾ Guardar Progreso"}),(0,b.jsx)("button",{onClick:()=>{w(),setTimeout(()=>r(!1),1500)},className:"px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-semibold shadow-md",children:"ðŸ Terminar"})]})]}),s&&(0,b.jsx)("div",{className:`mb-4 p-3 rounded-lg text-center font-semibold ${s.includes("âœ…")?"bg-green-100 text-green-800":s.includes("âŒ")?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:s}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-6 md:p-10 text-center",children:[(0,b.jsx)("h2",{className:"text-gray-600 mb-4",children:"Di una palabra que empiece con:"}),(0,b.jsx)("div",{className:"inline-block bg-gradient-to-br from-[#F7C873] to-[#e6b35a] rounded-full p-8 shadow-xl mb-8",children:(0,b.jsxs)("span",{className:"text-9xl font-black text-[#6B3F1D]",children:["/",a.toLowerCase(),"/"]})}),o&&(0,b.jsx)("div",{className:"mb-6 p-4 bg-gray-100 rounded-lg",children:(0,b.jsxs)("p",{className:"text-lg text-gray-700",children:["EscuchÃ©: ",(0,b.jsxs)("strong",{children:['"',o,'"']})]})}),m&&(0,b.jsx)("div",{className:`mb-6 p-4 rounded-lg text-lg font-semibold ${m.includes("âœ…")?"bg-green-100 text-green-800":m.includes("ðŸŽ¤")?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:m}),(0,b.jsx)("button",{onClick:()=>{let b=window.SpeechRecognition||window.webkitSpeechRecognition;if(!b)return void n("âŒ Tu navegador no soporta reconocimiento de voz");let c=new b;c.lang="es-ES",c.continuous=!1,c.interimResults=!1,c.onstart=()=>{l(!0),n("ðŸŽ¤ Escuchando...")},c.onresult=b=>{let c=b.results[0][0].transcript.trim().toLowerCase();if(!c){n("âŒ No se detectÃ³ ninguna palabra"),l(!1);return}p(c),(b=>{let c=b.toUpperCase(),d=a.toLowerCase();j(i+1);let e=!1,f="",k=(b,c)=>0===b?"inicio":b>=c-a.length?"final":"medio";if("C"===a&&(c.includes("C")||c.includes("QU")||c.includes("K"))){e=!0;let a=c.indexOf("C"),b=c.indexOf("QU"),d=c.indexOf("K");f=k(Math.min(a>=0?a:1/0,b>=0?b:1/0,d>=0?d:1/0),c.length)}else if("B"===a&&(c.includes("B")||c.includes("V"))){e=!0;let a=c.indexOf("B"),b=c.indexOf("V");f=k(Math.min(a>=0?a:1/0,b>=0?b:1/0),c.length)}else if("V"===a&&(c.includes("B")||c.includes("V"))){e=!0;let a=c.indexOf("B"),b=c.indexOf("V");f=k(Math.min(a>=0?a:1/0,b>=0?b:1/0),c.length)}else if("J"===a&&(c.includes("J")||c.includes("G"))){e=!0;let a=c.indexOf("J"),b=c.indexOf("G");f=k(Math.min(a>=0?a:1/0,b>=0?b:1/0),c.length)}else if("CH"===a&&c.includes("CH"))e=!0,f=k(c.indexOf("CH"),c.length);else if("LL"===a&&c.includes("LL"))e=!0,f=k(c.indexOf("LL"),c.length);else if("Q"===a&&(c.includes("QU")||c.includes("Q"))){e=!0;let a=c.indexOf("QU"),b=c.indexOf("Q");f=k(Math.min(a>=0?a:1/0,b>=0?b:1/0),c.length)}else if("K"===a&&(c.includes("K")||c.includes("C")||c.includes("QU"))){e=!0;let a=c.indexOf("K"),b=c.indexOf("C"),d=c.indexOf("QU");f=k(Math.min(a>=0?a:1/0,b>=0?b:1/0,d>=0?d:1/0),c.length)}else if("Z"===a&&(c.includes("Z")||c.includes("C"))){e=!0;let a=c.indexOf("Z"),b=c.indexOf("C");f=k(Math.min(a>=0?a:1/0,b>=0?b:1/0),c.length)}else"Ã‘"===a&&c.includes("Ã‘")?(e=!0,f=k(c.indexOf("Ã‘"),c.length)):c.includes(a)&&(e=!0,f=k(c.indexOf(a),c.length));if(e){h(g+10);let a="";"inicio"===f?a="al inicio":"medio"===f?a="en el medio":"final"===f&&(a="al final"),n(`âœ… \xa1Correcto! El fonema /${d}/ est\xe1 ${a} de "${b}"`),setTimeout(()=>v(),2e3)}else n(`âŒ "${b}" no contiene el fonema /${d}/. Intenta otra palabra.`)})(c)},c.onerror=()=>{n("âŒ Error al escuchar. Intenta de nuevo."),l(!1)},c.onend=()=>{l(!1)};try{c.start()}catch(a){n("âŒ Error al iniciar reconocimiento")}},disabled:k,className:`px-12 py-6 rounded-xl text-2xl font-bold shadow-lg transition-all ${k?"bg-red-500 text-white cursor-wait animate-pulse":"bg-gradient-to-r from-green-500 to-green-600 text-white hover:shadow-2xl hover:scale-105"}`,children:k?"ðŸŽ¤ Escuchando...":"ðŸŽ¤ Presiona para hablar"}),(0,b.jsx)("div",{className:"mt-8 grid grid-cols-1 gap-4 max-w-md mx-auto",children:(0,b.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,b.jsx)("div",{className:"text-xs text-gray-600",children:"PrecisiÃ³n"}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-purple-700",children:[i>0?Math.round(g/(10*i)*100):0,"%"]})]})})]})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-100 p-8 mt-16 md:mt-20",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-6 text-center",children:"ðŸŽ¯ Juego de Fonemas"}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-[#6B3F1D] mb-4",children:"Â¿CÃ³mo jugar?"}),(0,b.jsxs)("ol",{className:"list-decimal list-inside space-y-3 text-gray-700",children:[(0,b.jsx)("li",{children:"Se mostrarÃ¡ un fonema grande en pantalla (B, C, D, etc.)"}),(0,b.jsx)("li",{children:"Presiona el botÃ³n del micrÃ³fono"}),(0,b.jsx)("li",{children:"Di una palabra que empiece con ese fonema"}),(0,b.jsx)("li",{children:"Â¡Gana 10 puntos por cada palabra correcta!"})]}),(0,b.jsx)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,b.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,b.jsx)("strong",{children:"ðŸ’¡ Beneficio terapÃ©utico:"})," Las prolongaciones suelen aparecer al iniciar palabras. Practicar fonemas iniciales reduce la tensiÃ³n y mejora el ataque suave."]})})]}),(0,b.jsx)("button",{onClick:()=>{h(0),j(0),r(!0),t(""),v()},className:"w-full py-4 bg-gradient-to-r from-[#6B3F1D] to-[#8B5F3D] text-white text-xl font-bold rounded-xl hover:shadow-lg transition-all",children:"ðŸŽ® Iniciar Juego"}),(0,b.jsx)(d.default,{href:"/progreso",className:"block mt-4 text-center text-[#6B3F1D] hover:underline",children:"ðŸ“Š Ver mi progreso"})]})})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_juego-fonema_page_tsx_977a6bc3._.js.map
module.exports=[33095,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return k},getImageProps:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(33354),g=a.r(94915),h=a.r(67161),i=f._(a.r(2305));function j(a){let{props:b}=(0,g.getImgProps)(a,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200],imageSizes:[16,32,48,64,96],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let k=h.Image},71987,(a,b,c)=>{b.exports=a.r(33095)},85254,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(72131),e=a.i(70880);let f=["Icono de usuario.png","Icono de usuario 1.jpg","Icono de usuario 2.png","Icono de usuario 3.png","Icono de usuario 4.jpg","Icono de usuario 5.png","Icono de usuario 6.png","Icono de usuario 7.png","Icono de usuario 8.png","Icono de usuario 9.png","Icono de usuario 10.png","Icono de usuario 11.png"];function g({user:a,onClose:c,onSave:g}){let[h,i]=(0,d.useState)(a?.firstName||a?.name?.split(" ")[0]||""),[j,k]=(0,d.useState)(a?.middleName||""),[l,m]=(0,d.useState)(a?.lastName||a?.name?.split(" ")[1]||""),[n,o]=(0,d.useState)(a?.secondLastName||""),[p,q]=(0,d.useState)(a?.email||""),[r,s]=(0,d.useState)(a?.country||""),[t,u]=(0,d.useState)(a?.city||""),[v,w]=(0,d.useState)(""),[x,y]=(0,d.useState)(""),[z,A]=(0,d.useState)(""),[B,C]=(0,d.useState)(a?.icon||f[0]),[D,E]=(0,d.useState)(!1),[F,G]=(0,d.useState)(""),[H,I]=(0,d.useState)(!1),[J,K]=(0,d.useState)(!1),[L,M]=(0,d.useState)(!1),N=(0,d.useMemo)(()=>(0,e.getCountries)(),[]),O=(0,d.useMemo)(()=>r?(0,e.getCitiesByCountry)(r):[],[r]);(0,d.useEffect)(()=>{r&&O.length>0&&!O.includes(t)&&u("")},[r,O,t]);let P=async()=>{if(E(!0),G(""),x||z||v){if(!v){G("Debes ingresar tu contrase√±a actual"),E(!1);return}if(x!==z){G("Las contrase√±as nuevas no coinciden"),E(!1);return}if(x.length<6){G("La nueva contrase√±a debe tener al menos 6 caracteres"),E(!1);return}}try{let a=`${h} ${j} ${l} ${n}`.replace(/\s+/g," ").trim(),b=await fetch("/api/profile",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({firstName:h,middleName:j,lastName:l,secondLastName:n,email:p,country:r,city:t,oldPassword:v,newPassword:x,icon:B,name:a})});if(b.ok)G("Perfil actualizado"),g&&g({firstName:h,middleName:j,lastName:l,secondLastName:n,email:p,country:r,city:t,icon:B,name:a}),setTimeout(()=>c(),1500);else{let a=await b.json();G(a?.error?`Error: ${a.error}`:"Error al actualizar")}}catch(a){G("Error de red")}E(!1)};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50 overflow-y-auto p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-2xl my-8",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold mb-4 text-[#6B3F1D] flex items-center gap-3",children:["Editar perfil",(0,b.jsx)("img",{src:`/logos/${B}`,alt:"icono",className:"w-10 h-10 rounded-full border-2 border-[#F7C873]"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block mb-1 font-semibold",children:["Primer nombre ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{className:"w-full border rounded px-3 py-2",value:h,onChange:a=>i(a.target.value),required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block mb-1 font-semibold",children:"Segundo nombre"}),(0,b.jsx)("input",{className:"w-full border rounded px-3 py-2",value:j,onChange:a=>k(a.target.value),placeholder:"(Opcional)"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block mb-1 font-semibold",children:["Primer apellido ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{className:"w-full border rounded px-3 py-2",value:l,onChange:a=>m(a.target.value),required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block mb-1 font-semibold",children:"Segundo apellido"}),(0,b.jsx)("input",{className:"w-full border rounded px-3 py-2",value:n,onChange:a=>o(a.target.value),placeholder:"(Opcional)"})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsxs)("label",{className:"block mb-1 font-semibold",children:["Correo electr√≥nico ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{className:"w-full border rounded px-3 py-2",value:p,onChange:a=>q(a.target.value),type:"email",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block mb-1 font-semibold",children:"Pa√≠s"}),(0,b.jsxs)("select",{className:"w-full border rounded px-3 py-2",value:r,onChange:a=>s(a.target.value),children:[(0,b.jsx)("option",{value:"",children:"Selecciona tu pa√≠s"}),N.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block mb-1 font-semibold",children:"Ciudad"}),(0,b.jsxs)("select",{className:"w-full border rounded px-3 py-2",value:t,onChange:a=>u(a.target.value),disabled:!r,children:[(0,b.jsx)("option",{value:"",children:"Selecciona tu ciudad"}),O.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),r&&0===O.length&&(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Cargando ciudades..."})]}),(0,b.jsx)("div",{className:"md:col-span-2 border-t pt-4 mt-2",children:(0,b.jsx)("h3",{className:"font-bold text-gray-700 mb-3",children:"Cambiar contrase√±a (opcional)"})}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block mb-1 font-semibold",children:"Contrase√±a actual"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{className:"w-full border rounded px-3 py-2 pr-10",value:v,onChange:a=>w(a.target.value),type:H?"text":"password",placeholder:"Dejar en blanco para no cambiar"}),(0,b.jsx)("button",{type:"button",onClick:()=>I(!H),className:"absolute right-2 top-2 text-gray-600 hover:text-gray-800 text-xl",children:H?"üëÅÔ∏è":"üëÅÔ∏è‚Äçüó®Ô∏è"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block mb-1 font-semibold",children:"Nueva contrase√±a"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{className:"w-full border rounded px-3 py-2 pr-10",value:x,onChange:a=>y(a.target.value),type:J?"text":"password",placeholder:"M√≠nimo 6 caracteres"}),(0,b.jsx)("button",{type:"button",onClick:()=>K(!J),className:"absolute right-2 top-2 text-gray-600 hover:text-gray-800 text-xl",children:J?"üëÅÔ∏è":"üëÅÔ∏è‚Äçüó®Ô∏è"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block mb-1 font-semibold",children:"Confirmar contrase√±a"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{className:"w-full border rounded px-3 py-2 pr-10",value:z,onChange:a=>A(a.target.value),type:L?"text":"password",placeholder:"Repetir nueva contrase√±a"}),(0,b.jsx)("button",{type:"button",onClick:()=>M(!L),className:"absolute right-2 top-2 text-gray-600 hover:text-gray-800 text-xl",children:L?"üëÅÔ∏è":"üëÅÔ∏è‚Äçüó®Ô∏è"})]})]})]}),(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("label",{className:"block mb-2 font-semibold",children:"Icono de usuario"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-3",children:f.map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>C(a),className:`p-1 rounded-full border-2 transition-all ${B===a?"border-[#F7C873] ring-2 ring-[#6B3F1D] scale-110":"border-gray-200 hover:border-[#F7C873]"}`,children:(0,b.jsx)("img",{src:`/logos/${a}`,alt:a,className:"w-10 h-10 rounded-full"})},a))})]}),F&&(0,b.jsx)("div",{className:`my-4 p-3 rounded font-semibold ${F.includes("Error")?"bg-red-100 text-red-700 border border-red-300":"bg-green-100 text-green-700 border border-green-300"}`,children:F}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end mt-6",children:[(0,b.jsx)("button",{className:"px-6 py-2 rounded bg-gray-200 hover:bg-gray-300 transition-colors",onClick:c,children:"Cancelar"}),(0,b.jsx)("button",{className:"px-6 py-2 rounded bg-[#F7C873] text-[#6B3F1D] font-bold hover:bg-[#e6b35a] transition-colors",onClick:P,disabled:D,children:D?"Guardando...":"Guardar"})]})]})})}var h=a.i(50944),i=a.i(71987);function j(){let a=(0,d.useRef)(null),[e,f]=(0,d.useState)(!1),[j,k]=(0,d.useState)(null),[l,m]=(0,d.useState)(!1),[n,o]=(0,d.useState)(!0),p=(0,h.usePathname)(),q=(0,h.useRouter)(),[r,s]=(0,d.useState)(!1);(0,d.useEffect)(()=>{!async function(){try{let a=await fetch("/api/me",{credentials:"include",cache:"no-store"});if(a.ok){let b=await a.json();k(b.user)}}catch(a){console.error("Error fetching user:",a)}finally{o(!1)}}()},[p]),(0,d.useEffect)(()=>{if(l)return document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)};function b(b){a.current&&!a.current.contains(b.target)&&m(!1)}},[l]);let t=async()=>{try{await fetch("/api/logout",{method:"POST"}),k(null),q.push("/")}catch(a){console.error("Error logging out:",a)}},u=a=>a?a.split(" ")[0]:"Usuario";return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("nav",{className:"bg-[#F7C873] text-[#6B3F1D] shadow-md fixed w-full z-50 border-b-2 border-[#e6b35a]",children:[(0,b.jsx)("div",{className:"w-full mx-auto px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex justify-between items-center h-16 gap-4",children:[(0,b.jsxs)(c.default,{href:"/",className:"flex items-center min-w-max",children:[(0,b.jsx)("div",{className:"h-10 w-10 bg-white rounded-full flex items-center justify-center mr-2 shadow-md border-2 border-[#F7C873]",children:(0,b.jsx)("span",{className:"text-[#F7C873] font-bold text-lg",children:"F"})}),(0,b.jsx)("span",{className:"font-extrabold text-2xl tracking-wide ml-2 text-[#6B3F1D]",children:"FLUIDEZ ACTIVA"})]}),(0,b.jsxs)("div",{className:"hidden md:flex items-center justify-center flex-1 font-medium gap-8 whitespace-nowrap",children:[(0,b.jsx)(c.default,{href:"/",className:`text-[#6B3F1D] hover:text-[#a86c3a] transition${"/"===p?" font-bold":""}`,children:"Inicio"}),(0,b.jsx)(c.default,{href:"/daf",className:`text-[#6B3F1D] hover:text-[#a86c3a] transition${"/daf"===p?" font-bold":""}`,children:"DAF"}),(0,b.jsx)(c.default,{href:"/progreso",className:`text-[#6B3F1D] hover:text-[#a86c3a] transition${"/progreso"===p?" font-bold":""}`,children:"Progreso"}),(0,b.jsx)(c.default,{href:"/ejercicios",className:`text-[#6B3F1D] hover:text-[#a86c3a] transition${"/ejercicios"===p?" font-bold":""}`,children:"Ejercicios"}),(0,b.jsx)(c.default,{href:"/ejercicios-fonema",className:`text-[#6B3F1D] hover:text-[#a86c3a] transition${"/ejercicios-fonema"===p?" font-bold":""}`,children:"Ejercicios con fonema"}),(0,b.jsx)(c.default,{href:"/juego-fonema",className:`text-[#6B3F1D] hover:text-[#a86c3a] transition${"/juego-fonema"===p?" font-bold":""}`,children:"Juego fonemas"}),(0,b.jsx)(c.default,{href:"/juego-silabas",className:`text-[#6B3F1D] hover:text-[#a86c3a] transition${"/juego-silabas"===p?" font-bold":""}`,children:"S√≠labas y sonidos"}),(0,b.jsx)(c.default,{href:"/karaoke",className:`text-[#6B3F1D] hover:text-[#a86c3a] transition${"/karaoke"===p?" font-bold":""}`,children:"Karaoke"}),(0,b.jsx)(c.default,{href:"/visualizacion",className:`text-[#6B3F1D] hover:text-[#a86c3a] transition${"/visualizacion"===p?" font-bold":""}`,children:"Espectrograma y Visualizaci√≥n del habla"}),(0,b.jsx)(c.default,{href:"/about",className:`text-[#6B3F1D] hover:text-[#a86c3a] transition${"/about"===p?" font-bold":""}`,children:"Sobre nosotros"}),j?(0,b.jsxs)("div",{className:"ml-8 flex items-center gap-2 min-w-max relative",children:[(0,b.jsxs)("button",{onClick:()=>m(!l),className:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg border-2 border-[#6B3F1D] hover:bg-[#F7C873] transition shadow",children:[(0,b.jsx)(i.default,{src:`/logos/${j.icon||"Icono de usuario.png"}`,alt:"Usuario",width:24,height:24,className:"rounded-full"}),(0,b.jsx)("span",{className:"font-semibold text-[#6B3F1D]",children:u(j.name)})]}),l&&(0,b.jsx)("div",{ref:a,className:"absolute left-1/2 top-full mt-2 bg-white rounded-lg shadow-xl border-2 border-[#F7C873] min-w-[270px] overflow-hidden flex flex-col transform -translate-x-1/2",style:{zIndex:9999},children:(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("button",{onClick:()=>{s(!0),m(!1)},className:"flex-1 text-left px-4 py-2 text-[#6B3F1D] hover:bg-[#F7C873] font-semibold transition border-b-2 border-gray-200",children:"Editar perfil"}),(0,b.jsx)("button",{onClick:()=>{t(),m(!1)},className:"flex-1 text-left px-4 py-2 text-[#6B3F1D] hover:bg-[#F7C873] font-semibold transition border-b-2 border-gray-200 border-l-2 border-gray-200",children:"Cerrar sesi√≥n"})]})})]}):n?(0,b.jsx)("div",{className:"ml-8 mr-4 flex space-x-3 min-w-max",children:(0,b.jsx)("div",{className:"px-4 py-2 bg-gray-200 rounded-lg animate-pulse w-24 h-10"})}):(0,b.jsxs)("div",{className:"ml-8 mr-4 flex space-x-3 min-w-max",children:[(0,b.jsx)(c.default,{href:"/login",className:"px-4 py-2 bg-white text-[#6B3F1D] rounded-lg font-semibold border-2 border-[#6B3F1D] hover:bg-[#F7C873] transition shadow",children:"Iniciar sesi√≥n"}),(0,b.jsx)(c.default,{href:"/signup",className:"px-4 py-2 bg-white text-[#6B3F1D] rounded-lg font-semibold border-2 border-[#6B3F1D] hover:bg-[#F7C873] transition shadow",children:"Crear cuenta"})]})]}),(0,b.jsx)("div",{className:"md:hidden",children:(0,b.jsx)("button",{onClick:()=>f(!e),className:"p-2 rounded-md hover:bg-[#e6b35a] focus:outline-none",children:(0,b.jsx)("svg",{className:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:e?(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})}),e&&(0,b.jsx)("div",{className:"md:hidden bg-[#F7C873] text-[#6B3F1D] border-t-2 border-[#e6b35a]",children:(0,b.jsxs)("div",{className:"px-4 py-3 space-y-2 font-medium",children:[(0,b.jsx)(c.default,{href:"/",className:`block hover:text-[#a86c3a]${"/"===p?" font-bold":""}`,children:"Inicio"}),(0,b.jsx)(c.default,{href:"/daf",className:`block hover:text-[#a86c3a]${"/daf"===p?" font-bold":""}`,children:"DAF"}),(0,b.jsx)(c.default,{href:"/ejercicios",className:`block hover:text-[#a86c3a]${"/ejercicios"===p?" font-bold":""}`,children:"Ejercicios"}),(0,b.jsx)(c.default,{href:"/ejercicios-fonema",className:`block hover:text-[#a86c3a]${"/ejercicios-fonema"===p?" font-bold":""}`,children:"Ejercicios con fonema"}),(0,b.jsx)(c.default,{href:"/juego-fonema",className:`block hover:text-[#a86c3a]${"/juego-fonema"===p?" font-bold":""}`,children:"Juego fonemas"}),(0,b.jsx)(c.default,{href:"/juego-silabas",className:`block hover:text-[#a86c3a]${"/juego-silabas"===p?" font-bold":""}`,children:"S√≠labas y sonidos"}),(0,b.jsx)(c.default,{href:"/karaoke",className:`block hover:text-[#a86c3a]${"/karaoke"===p?" font-bold":""}`,children:"Karaoke"}),(0,b.jsx)(c.default,{href:"/progreso",className:`block hover:text-[#a86c3a]${"/progreso"===p?" font-bold":""}`,children:"Progreso"}),(0,b.jsx)(c.default,{href:"/visualizacion",className:`block hover:text-[#a86c3a]${"/visualizacion"===p?" font-bold":""}`,children:"Espectrograma y Visualizaci√≥n del habla"}),(0,b.jsx)(c.default,{href:"/about",className:`block hover:text-[#a86c3a]${"/about"===p?" font-bold":""}`,children:"Sobre nosotros"}),(0,b.jsx)("hr",{className:"border-[#e6b35a]"}),j?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 py-2",children:[(0,b.jsx)(i.default,{src:`/logos/${j.icon||"Icono de usuario.png"}`,alt:"Usuario",width:24,height:24,className:"rounded-full"}),(0,b.jsx)("span",{className:"font-semibold",children:u(j.name)})]}),(0,b.jsx)("button",{onClick:t,className:"block w-full text-left hover:text-[#a86c3a]",children:"Cerrar sesi√≥n"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.default,{href:"/login",className:"block hover:text-[#a86c3a]",children:"Iniciar sesi√≥n"}),(0,b.jsx)(c.default,{href:"/signup",className:"block hover:text-[#a86c3a]",children:"Crear cuenta"})]})]})})]}),r&&j&&(0,b.jsx)(g,{user:j,onClose:()=>s(!1),onSave:a=>{k({...j,...a}),s(!1)}})]})}a.s(["default",()=>j],85254)}];

//# sourceMappingURL=_a766e6c7._.js.map